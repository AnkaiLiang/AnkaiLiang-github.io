<!DOCTYPE html>
<html lang="en">
<head>

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="Ankai Liang" />



<meta name="description" content="CS615 Assignment5">
<meta name="keywords" content="System Administration">
<meta property="og:type" content="article">
<meta property="og:title" content="Text-Processing">
<meta property="og:url" content="https://AnkaiLiang.github.io/2017/08/17/Text-processing-in-Linux/index.html">
<meta property="og:site_name" content="Ankai Liang&#39;s Blog">
<meta property="og:description" content="CS615 Assignment5">
<meta property="og:updated_time" content="2017-08-17T07:32:02.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Text-Processing">
<meta name="twitter:description" content="CS615 Assignment5">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="Ankai Liang&#39;s Blog" type="application/atom+xml">



    <link rel="shortcut icon" href="/img/favicon.png">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">



<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>Text-Processing | Ankai Liang&#39;s Blog</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: false,
        isPost: true,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: undefined
    }
</script>


    <script> yiliaConfig.jquery_ui = [false]; </script>



    <script> yiliaConfig.rootUrl = "\/";</script>






</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/avatar.png" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">Ankai Liang</a></h1>
        </hgroup>

        
        <p class="header-subtitle">强而不燥，弱而不虚</p>
        

        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>Menu</li>
                        <li>Tags</li>
                        
                        <li>Friends</li>
                        
                        
                        <li>About Me</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">Home</a></li>
                        
                            <li><a href="/archives/">All Article</a></li>
                        
                            <li><a href="/tags/">tags</a></li>
                        
                            <li><a href="/about/">Resume</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" href="/lakeandgod@gmail.com" title="Email"></a>
                            
                                <a class="fa 新浪微博" href="http://weibo.com/1783077873/profile?rightmod=1&wvr=6&mod=personnumber" title="新浪微博"></a>
                            
                                <a class="fa GitHub" href="https://github.com/ankaiLiang" title="GitHub"></a>
                            
                                <a class="fa Facebook" href="https://www.facebook.com/lakeandgod" title="Facebook"></a>
                            
                                <a class="fa LinkedIn" href="https://www.linkedin.com/in/ankai-liang-a774b3119?trk=hp-identity-name" title="LinkedIn"></a>
                            
                                <a class="fa Instagram" href="https://www.instagram.com/ankai_liang/" title="Instagram"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/AI/">AI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Distrubute-System/">Distrubute System</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/System-Administration/">System Administration</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" href="http://jayveehe.github.io">Jayvee He的博客</a>
                    
                      <a class="main-nav-link switch-friends-link" href="http://wangzi6147.github.io">wangzi的博客</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">true</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">Ankai Liang</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/avatar.png" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">Ankai Liang</a></h1>
            </hgroup>
            
            <p class="header-subtitle">强而不燥，弱而不虚</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">Home</a></li>
                
                    <li><a href="/archives/">All Article</a></li>
                
                    <li><a href="/tags/">tags</a></li>
                
                    <li><a href="/about/">Resume</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="/lakeandgod@gmail.com" title="Email"></a>
                            
                                <a class="fa 新浪微博" target="_blank" href="http://weibo.com/1783077873/profile?rightmod=1&wvr=6&mod=personnumber" title="新浪微博"></a>
                            
                                <a class="fa GitHub" target="_blank" href="https://github.com/ankaiLiang" title="GitHub"></a>
                            
                                <a class="fa Facebook" target="_blank" href="https://www.facebook.com/lakeandgod" title="Facebook"></a>
                            
                                <a class="fa LinkedIn" target="_blank" href="https://www.linkedin.com/in/ankai-liang-a774b3119?trk=hp-identity-name" title="LinkedIn"></a>
                            
                                <a class="fa Instagram" target="_blank" href="https://www.instagram.com/ankai_liang/" title="Instagram"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="Tags" friends="Friends" about="About Me"/>
</nav>
      <div class="body-wrap"><article id="post-Text-processing-in-Linux" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/08/17/Text-processing-in-Linux/" class="article-date">
      <time datetime="2017-08-17T04:32:41.000Z" itemprop="datePublished">2017-08-17</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Text-Processing
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        

        
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/System-Administration/">System Administration</a></li></ul>
    </div>

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <a id="more"></a>
<h1 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h1><ul>
<li>link: <a href="http://www.cs.stevens.edu/~jschauma/615/s17-hw5.html" target="_blank" rel="external">http://www.cs.stevens.edu/~jschauma/615/s17-hw5.html</a></li>
</ul>
<p>Objective:</p>
<p>The objective of this assignment is for you to practice the use of the common text processing tools available on the Unix systems.</p>
<p>To do this, you will process a large input data set and extract a few bits of information. Each question / exercise can be answered with a simple pipeline of common Unix commands.</p>
<p>This assignment is worth 20 points.</p>
<p>Summary:</p>
<p>Every System Administrator sooner or later finds herself in the position of having to correlate events from e.g. an http log. In this exercise, we will use the web logs provided by the Wikimedia foundation, allowing us to process a sufficiently large and diverse data set.</p>
<p>The Wikimedia Foundation makes available logs of their web servers at <a href="https://dumps.wikimedia.org/" target="_blank" rel="external">https://dumps.wikimedia.org/</a>. The data and format we’re interested in is described in more detail on this page. In a nutshell, the files contain lines of data containing a small number of fields:</p>
<p>domain page_title count_views total_response_size<br>We will be looking at the data from March 27th, 2016: <a href="https://dumps.wikimedia.org/other/pagecounts-all-sites/2016/2016-03/pagecounts-20160327-000000.gz" target="_blank" rel="external">https://dumps.wikimedia.org/other/pagecounts-all-sites/2016/2016-03/pagecounts-20160327-000000.gz</a></p>
<p>Details:</p>
<p>Create a NetBSD EC2 instance of ami-569ed93c. All your work is to be done on this instance. Your solutions will be tested on such an instance. Do NOT work on your own system; the tools may behave differently and I may not be able to verify your solution..</p>
<p>Answer the following questions. Describe your method, then Provide the exact commands you used to determine the answer, then show the answer. For example, if the question was “How many lines are in the file?”, then your answer might be:</p>
<p>Uncompress the input file and pipe output into wc(1):</p>
<p>$ gzcat pagecounts-20160327-000000.gz | wc -l<br> 9771932<br>Answer all of these questions:</p>
<p>How many unique objects were requested?<br>How many unique objects were requested for en only?<br>Which is the most often requested object for de?<br>How many requests per second were handled during this hour?<br>How much data was transferred in total?<br>Which was the largest object requested for fr?<br>What is the longest word found on the ten most frequently retrieved English Wikipedia pages?</p>
<hr>
<h1 id="Content"><a href="#Content" class="headerlink" title="Content"></a>Content</h1><h1 id="HW5-CS615"><a href="#HW5-CS615" class="headerlink" title="HW5_CS615"></a>HW5_CS615</h1><ul>
<li>Ankai Liang</li>
<li>10411998</li>
</ul>
<h2 id="Create-instance-of-ami-569ed93c-and-log-in"><a href="#Create-instance-of-ami-569ed93c-and-log-in" class="headerlink" title="Create instance of ami-569ed93c and log in"></a>Create instance of ami-569ed93c and log in</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div></pre></td><td class="code"><pre><div class="line">➜  ~ git:(master) ✗ aws ec2 run-instances --image-id ami-569ed93c --instance-type t1.micro --key-name keypair3 --security-groups mysg </div><div class="line">&#123;</div><div class="line">    &quot;OwnerId&quot;: &quot;624990436890&quot;, </div><div class="line">    &quot;ReservationId&quot;: &quot;r-0df0169b808767f43&quot;, </div><div class="line">    &quot;Groups&quot;: [], </div><div class="line">    &quot;Instances&quot;: [</div><div class="line">        &#123;</div><div class="line">            &quot;Monitoring&quot;: &#123;</div><div class="line">                &quot;State&quot;: &quot;disabled&quot;</div><div class="line">            &#125;, </div><div class="line">            &quot;PublicDnsName&quot;: &quot;&quot;, </div><div class="line">            &quot;KernelId&quot;: &quot;aki-8f9dcae6&quot;, </div><div class="line">            &quot;State&quot;: &#123;</div><div class="line">                &quot;Code&quot;: 0, </div><div class="line">                &quot;Name&quot;: &quot;pending&quot;</div><div class="line">            &#125;, </div><div class="line">            &quot;EbsOptimized&quot;: false, </div><div class="line">            &quot;LaunchTime&quot;: &quot;2017-04-02T21:01:52.000Z&quot;, </div><div class="line">            &quot;PrivateIpAddress&quot;: &quot;172.31.53.207&quot;, </div><div class="line">            &quot;ProductCodes&quot;: [], </div><div class="line">            &quot;VpcId&quot;: &quot;vpc-adb325cb&quot;, </div><div class="line">            &quot;StateTransitionReason&quot;: &quot;&quot;, </div><div class="line">            &quot;InstanceId&quot;: &quot;i-00254b998314cf6b6&quot;, </div><div class="line">            &quot;ImageId&quot;: &quot;ami-569ed93c&quot;, </div><div class="line">            &quot;PrivateDnsName&quot;: &quot;ip-172-31-53-207.ec2.internal&quot;, </div><div class="line">            &quot;KeyName&quot;: &quot;keypair3&quot;, </div><div class="line">            &quot;SecurityGroups&quot;: [</div><div class="line">                &#123;</div><div class="line">                    &quot;GroupName&quot;: &quot;mysg&quot;, </div><div class="line">                    &quot;GroupId&quot;: &quot;sg-a364e4df&quot;</div><div class="line">                &#125;</div><div class="line">            ], </div><div class="line">            &quot;ClientToken&quot;: &quot;&quot;, </div><div class="line">            &quot;SubnetId&quot;: &quot;subnet-8e2c63a3&quot;, </div><div class="line">            &quot;InstanceType&quot;: &quot;t1.micro&quot;, </div><div class="line">            &quot;NetworkInterfaces&quot;: [</div><div class="line">                &#123;</div><div class="line">                    &quot;Status&quot;: &quot;in-use&quot;, </div><div class="line">                    &quot;MacAddress&quot;: &quot;12:bf:13:6a:ef:d6&quot;, </div><div class="line">                    &quot;SourceDestCheck&quot;: true, </div><div class="line">                    &quot;VpcId&quot;: &quot;vpc-adb325cb&quot;, </div><div class="line">                    &quot;Description&quot;: &quot;&quot;, </div><div class="line">                    &quot;NetworkInterfaceId&quot;: &quot;eni-526456a6&quot;, </div><div class="line">                    &quot;PrivateIpAddresses&quot;: [</div><div class="line">                        &#123;</div><div class="line">                            &quot;PrivateDnsName&quot;: &quot;ip-172-31-53-207.ec2.internal&quot;, </div><div class="line">                            &quot;Primary&quot;: true, </div><div class="line">                            &quot;PrivateIpAddress&quot;: &quot;172.31.53.207&quot;</div><div class="line">                        &#125;</div><div class="line">                    ], </div><div class="line">                    &quot;PrivateDnsName&quot;: &quot;ip-172-31-53-207.ec2.internal&quot;, </div><div class="line">                    &quot;Attachment&quot;: &#123;</div><div class="line">                        &quot;Status&quot;: &quot;attaching&quot;, </div><div class="line">                        &quot;DeviceIndex&quot;: 0, </div><div class="line">                        &quot;DeleteOnTermination&quot;: true, </div><div class="line">                        &quot;AttachmentId&quot;: &quot;eni-attach-5c5fc570&quot;, </div><div class="line">                        &quot;AttachTime&quot;: &quot;2017-04-02T21:01:52.000Z&quot;</div><div class="line">                    &#125;, </div><div class="line">                    &quot;Groups&quot;: [</div><div class="line">                        &#123;</div><div class="line">                            &quot;GroupName&quot;: &quot;mysg&quot;, </div><div class="line">                            &quot;GroupId&quot;: &quot;sg-a364e4df&quot;</div><div class="line">                        &#125;</div><div class="line">                    ], </div><div class="line">                    &quot;Ipv6Addresses&quot;: [], </div><div class="line">                    &quot;SubnetId&quot;: &quot;subnet-8e2c63a3&quot;, </div><div class="line">                    &quot;OwnerId&quot;: &quot;624990436890&quot;, </div><div class="line">                    &quot;PrivateIpAddress&quot;: &quot;172.31.53.207&quot;</div><div class="line">                &#125;</div><div class="line">            ], </div><div class="line">            &quot;SourceDestCheck&quot;: true, </div><div class="line">            &quot;Placement&quot;: &#123;</div><div class="line">                &quot;Tenancy&quot;: &quot;default&quot;, </div><div class="line">                &quot;GroupName&quot;: &quot;&quot;, </div><div class="line">                &quot;AvailabilityZone&quot;: &quot;us-east-1d&quot;</div><div class="line">            &#125;, </div><div class="line">            &quot;Hypervisor&quot;: &quot;xen&quot;, </div><div class="line">            &quot;BlockDeviceMappings&quot;: [], </div><div class="line">            &quot;Architecture&quot;: &quot;i386&quot;, </div><div class="line">            &quot;StateReason&quot;: &#123;</div><div class="line">                &quot;Message&quot;: &quot;pending&quot;, </div><div class="line">                &quot;Code&quot;: &quot;pending&quot;</div><div class="line">            &#125;, </div><div class="line">            &quot;RootDeviceName&quot;: &quot;/dev/sda1&quot;, </div><div class="line">            &quot;VirtualizationType&quot;: &quot;paravirtual&quot;, </div><div class="line">            &quot;RootDeviceType&quot;: &quot;ebs&quot;, </div><div class="line">            &quot;AmiLaunchIndex&quot;: 0</div><div class="line">        &#125;</div><div class="line">    ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div></pre></td><td class="code"><pre><div class="line">➜  ~ git:(master) ✗ aws ec2 describe-instances --filters &quot;Name=image-id,Values=ami-569ed93c&quot; </div><div class="line">&#123;</div><div class="line">    &quot;Reservations&quot;: [</div><div class="line">        &#123;</div><div class="line">            &quot;OwnerId&quot;: &quot;624990436890&quot;, </div><div class="line">            &quot;ReservationId&quot;: &quot;r-0df0169b808767f43&quot;, </div><div class="line">            &quot;Groups&quot;: [], </div><div class="line">            &quot;Instances&quot;: [</div><div class="line">                &#123;</div><div class="line">                    &quot;Monitoring&quot;: &#123;</div><div class="line">                        &quot;State&quot;: &quot;disabled&quot;</div><div class="line">                    &#125;, </div><div class="line">                    &quot;PublicDnsName&quot;: &quot;ec2-34-207-94-168.compute-1.amazonaws.com&quot;, </div><div class="line">                    &quot;RootDeviceType&quot;: &quot;ebs&quot;, </div><div class="line">                    &quot;State&quot;: &#123;</div><div class="line">                        &quot;Code&quot;: 16, </div><div class="line">                        &quot;Name&quot;: &quot;running&quot;</div><div class="line">                    &#125;, </div><div class="line">                    &quot;EbsOptimized&quot;: false, </div><div class="line">                    &quot;LaunchTime&quot;: &quot;2017-04-02T21:01:52.000Z&quot;, </div><div class="line">                    &quot;PublicIpAddress&quot;: &quot;34.207.94.168&quot;, </div><div class="line">                    &quot;PrivateIpAddress&quot;: &quot;172.31.53.207&quot;, </div><div class="line">                    &quot;ProductCodes&quot;: [], </div><div class="line">                    &quot;VpcId&quot;: &quot;vpc-adb325cb&quot;, </div><div class="line">                    &quot;StateTransitionReason&quot;: &quot;&quot;, </div><div class="line">                    &quot;InstanceId&quot;: &quot;i-00254b998314cf6b6&quot;, </div><div class="line">                    &quot;ImageId&quot;: &quot;ami-569ed93c&quot;, </div><div class="line">                    &quot;PrivateDnsName&quot;: &quot;ip-172-31-53-207.ec2.internal&quot;, </div><div class="line">                    &quot;KeyName&quot;: &quot;keypair3&quot;, </div><div class="line">                    &quot;SecurityGroups&quot;: [</div><div class="line">                        &#123;</div><div class="line">                            &quot;GroupName&quot;: &quot;mysg&quot;, </div><div class="line">                            &quot;GroupId&quot;: &quot;sg-a364e4df&quot;</div><div class="line">                        &#125;</div><div class="line">                    ], </div><div class="line">                    &quot;ClientToken&quot;: &quot;&quot;, </div><div class="line">                    &quot;SubnetId&quot;: &quot;subnet-8e2c63a3&quot;, </div><div class="line">                    &quot;InstanceType&quot;: &quot;t1.micro&quot;, </div><div class="line">                    &quot;NetworkInterfaces&quot;: [</div><div class="line">                        &#123;</div><div class="line">                            &quot;Status&quot;: &quot;in-use&quot;, </div><div class="line">                            &quot;MacAddress&quot;: &quot;12:bf:13:6a:ef:d6&quot;, </div><div class="line">                            &quot;SourceDestCheck&quot;: true, </div><div class="line">                            &quot;VpcId&quot;: &quot;vpc-adb325cb&quot;, </div><div class="line">                            &quot;Description&quot;: &quot;&quot;, </div><div class="line">                            &quot;Association&quot;: &#123;</div><div class="line">                                &quot;PublicIp&quot;: &quot;34.207.94.168&quot;, </div><div class="line">                                &quot;PublicDnsName&quot;: &quot;ec2-34-207-94-168.compute-1.amazonaws.com&quot;, </div><div class="line">                                &quot;IpOwnerId&quot;: &quot;amazon&quot;</div><div class="line">                            &#125;, </div><div class="line">                            &quot;NetworkInterfaceId&quot;: &quot;eni-526456a6&quot;, </div><div class="line">                            &quot;PrivateIpAddresses&quot;: [</div><div class="line">                                &#123;</div><div class="line">                                    &quot;PrivateDnsName&quot;: &quot;ip-172-31-53-207.ec2.internal&quot;, </div><div class="line">                                    &quot;Association&quot;: &#123;</div><div class="line">                                        &quot;PublicIp&quot;: &quot;34.207.94.168&quot;, </div><div class="line">                                        &quot;PublicDnsName&quot;: &quot;ec2-34-207-94-168.compute-1.amazonaws.com&quot;, </div><div class="line">                                        &quot;IpOwnerId&quot;: &quot;amazon&quot;</div><div class="line">                                    &#125;, </div><div class="line">                                    &quot;Primary&quot;: true, </div><div class="line">                                    &quot;PrivateIpAddress&quot;: &quot;172.31.53.207&quot;</div><div class="line">                                &#125;</div><div class="line">                            ], </div><div class="line">                            &quot;PrivateDnsName&quot;: &quot;ip-172-31-53-207.ec2.internal&quot;, </div><div class="line">                            &quot;Attachment&quot;: &#123;</div><div class="line">                                &quot;Status&quot;: &quot;attached&quot;, </div><div class="line">                                &quot;DeviceIndex&quot;: 0, </div><div class="line">                                &quot;DeleteOnTermination&quot;: true, </div><div class="line">                                &quot;AttachmentId&quot;: &quot;eni-attach-5c5fc570&quot;, </div><div class="line">                                &quot;AttachTime&quot;: &quot;2017-04-02T21:01:52.000Z&quot;</div><div class="line">                            &#125;, </div><div class="line">                            &quot;Groups&quot;: [</div><div class="line">                                &#123;</div><div class="line">                                    &quot;GroupName&quot;: &quot;mysg&quot;, </div><div class="line">                                    &quot;GroupId&quot;: &quot;sg-a364e4df&quot;</div><div class="line">                                &#125;</div><div class="line">                            ], </div><div class="line">                            &quot;Ipv6Addresses&quot;: [], </div><div class="line">                            &quot;SubnetId&quot;: &quot;subnet-8e2c63a3&quot;, </div><div class="line">                            &quot;OwnerId&quot;: &quot;624990436890&quot;, </div><div class="line">                            &quot;PrivateIpAddress&quot;: &quot;172.31.53.207&quot;</div><div class="line">                        &#125;</div><div class="line">                    ], </div><div class="line">                    &quot;SourceDestCheck&quot;: true, </div><div class="line">                    &quot;Placement&quot;: &#123;</div><div class="line">                        &quot;Tenancy&quot;: &quot;default&quot;, </div><div class="line">                        &quot;GroupName&quot;: &quot;&quot;, </div><div class="line">                        &quot;AvailabilityZone&quot;: &quot;us-east-1d&quot;</div><div class="line">                    &#125;, </div><div class="line">                    &quot;Hypervisor&quot;: &quot;xen&quot;, </div><div class="line">                    &quot;BlockDeviceMappings&quot;: [</div><div class="line">                        &#123;</div><div class="line">                            &quot;DeviceName&quot;: &quot;/dev/sda1&quot;, </div><div class="line">                            &quot;Ebs&quot;: &#123;</div><div class="line">                                &quot;Status&quot;: &quot;attached&quot;, </div><div class="line">                                &quot;DeleteOnTermination&quot;: true, </div><div class="line">                                &quot;VolumeId&quot;: &quot;vol-039aba578c059024c&quot;, </div><div class="line">                                &quot;AttachTime&quot;: &quot;2017-04-02T21:01:53.000Z&quot;</div><div class="line">                            &#125;</div><div class="line">                        &#125;, </div><div class="line">                        &#123;</div><div class="line">                            &quot;DeviceName&quot;: &quot;/dev/sda2&quot;, </div><div class="line">                            &quot;Ebs&quot;: &#123;</div><div class="line">                                &quot;Status&quot;: &quot;attached&quot;, </div><div class="line">                                &quot;DeleteOnTermination&quot;: true, </div><div class="line">                                &quot;VolumeId&quot;: &quot;vol-0451313c91b503cd5&quot;, </div><div class="line">                                &quot;AttachTime&quot;: &quot;2017-04-02T21:01:53.000Z&quot;</div><div class="line">                            &#125;</div><div class="line">                        &#125;</div><div class="line">                    ], </div><div class="line">                    &quot;Architecture&quot;: &quot;i386&quot;, </div><div class="line">                    &quot;KernelId&quot;: &quot;aki-8f9dcae6&quot;, </div><div class="line">                    &quot;RootDeviceName&quot;: &quot;/dev/sda1&quot;, </div><div class="line">                    &quot;VirtualizationType&quot;: &quot;paravirtual&quot;, </div><div class="line">                    &quot;AmiLaunchIndex&quot;: 0</div><div class="line">                &#125;</div><div class="line">            ]</div><div class="line">        &#125;</div><div class="line">    ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Gain public DNS : ec2-34-207-94-168.compute-1.amazonaws.com</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">➜  ~ git:(master) ✗ cd documents</div><div class="line">➜  documents git:(master) ✗ ssh -i p.pem root@ec2-34-207-94-168.compute-1.amazonaws.com</div><div class="line">The authenticity of host &apos;ec2-34-207-94-168.compute-1.amazonaws.com (34.207.94.168)&apos; can&apos;t be established.</div><div class="line">ECDSA key fingerprint is SHA256:auJQpbA0bhRxBdP2BjMaJYvLdaBH+PROUgN5O9WE+SQ.</div><div class="line">Are you sure you want to continue connecting (yes/no)? yes</div><div class="line">Warning: Permanently added &apos;ec2-34-207-94-168.compute-1.amazonaws.com,34.207.94.168&apos; (ECDSA) to the list of known hosts.</div><div class="line">NetBSD 7.0 (XEN3PAE_DOMU.201509250726Z)</div><div class="line">Welcome to NetBSD - Amazon EC2 image!</div><div class="line"></div><div class="line">This system is running a snapshot of a stable branch of the NetBSD</div><div class="line">operating system, adapted for running on the Amazon EC2 infrastructure.</div><div class="line"></div><div class="line">The environment is very similar to one provided within a typical Xen domU</div><div class="line">installation. It contains a small, autonomous environment (including a</div><div class="line">compiler toolchain) that you can run to build your own system.</div><div class="line"></div><div class="line">The file system is lightly populated so you have plenty of space to play with.</div><div class="line">Should you need a src or pkgsrc tree, please use the &quot;bootstrap&quot; script found</div><div class="line">under /usr to download them.  You can also use the script to set up</div><div class="line">binary packages using &quot;pkgin&quot;:</div><div class="line"></div><div class="line">                /usr/bootstrap.sh [src|pkgsrc|binpkg|xbase|xsets]</div><div class="line"></div><div class="line">This AMI sends email to the maintainer on first boot, to help get</div><div class="line">an idea of what is in use at any given time.  </div><div class="line"></div><div class="line">You are encouraged to test this image as thoroughly as possible.  Should you</div><div class="line">encounter any problem, please report it back to the development team using the</div><div class="line">send-pr(1) utility (requires a working MTA).  If yours is not properly set up,</div><div class="line">use the web interface at: http://www.NetBSD.org/support/send-pr.html</div><div class="line"></div><div class="line">Thank you for helping us test and improve NetBSD&apos;s quality!</div><div class="line">Terminal type is xterm-256color.</div><div class="line">We recommend that you create a non-root account and use su(1) for root access.</div><div class="line">ip-172-31-53-207#</div></pre></td></tr></table></figure>
<p>Use <code>scp</code> copy the data set into instance.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">➜  ~ git:(master) ✗ scp -i ~/Documents/p.pem ~/Desktop/pagecounts-20160327-000000.gz root@ec2-34-207-94-168.compute-1.amazonaws.com:~/pagecounts-20160327-000000.gz</div><div class="line">pagecounts-20160327-000000.gz                                                            74%   98MB 301.6KB/s   01:51 ETA</div></pre></td></tr></table></figure>
<p>keep Waiting until finished.</p>
<h2 id="Answear-Question"><a href="#Answear-Question" class="headerlink" title="Answear Question"></a>Answear Question</h2><p>Catch a glimpse of the data set. Then I know what the data set looks like.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">ip-172-31-53-207# gzcat pagecounts-20160327-000000.gz | head -n 3</div><div class="line">aa File:Boating_accident_injury.jpg 1 10840</div><div class="line">aa File:Cash_payment_timeline_on_foreclosures.jpg 2 17202</div><div class="line">aa File:Loreephotography.com/leona-dargis/_Loan_graphs.jpg 1 4697</div></pre></td></tr></table></figure>
<ol>
<li>How many unique objects were requested?</li>
</ol>
<p>At first time, I found this t1.micor system memory is insufficient. The memory of t1.micor only has 0.613g.<br>I create another C3.large instance of ami-569ed93c. The process of creation is similar as above, so the same will not be repeated here. The new instance Public DNS is ec2-34-205-154-26.compute-1.amazonaws.com.</p>
<p>I also try to use ‘gzcat pagecounts-20160327-000000.gz | cut -f2 -d’ ‘ | sort | uniq | wc -l’. But the memory still insufficient.<br>By reading the documents in <a href="http://www.gnu.org/software/gawk/manual/gawk.html" target="_blank" rel="external">http://www.gnu.org/software/gawk/manual/gawk.html</a>. I figured out this question.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ip-172-31-53-207# gzcat pagecounts-20160327-000000.gz | awk &apos;BEGIN&#123;count=0&#125; &#123;if (data[$2]++ == 0)&#123;count++&#125;&#125; END&#123;print &quot;There are&quot;, count,&quot; unique objects.&quot;&#125;&apos;</div><div class="line">There are 7682184  unique objects.</div></pre></td></tr></table></figure>
<p>After finish Question3, I used ‘[ ]’ as the delimiter.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ip-172-31-53-207# gzcat pagecounts-20160327-000000.gz | awk -F &apos;[ ]&apos; &apos;BEGIN&#123;count=0&#125; &#123;if (data[$2]++ == 0)&#123;count++&#125;&#125; END&#123;print &quot;There are&quot;, count,&quot; unique objects.&quot;&#125;&apos;</div><div class="line">There are 7682185  unique objects.</div></pre></td></tr></table></figure>
<p>After reading mail list professor’s reply,<br>I realized “unique pairing of domain and resource name” is a unique objects, so it’s very simple:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ip-172-31-53-207# gzcat pagecounts-20160327-000000.gz | wc -l</div><div class="line"> 9771932</div></pre></td></tr></table></figure>
<ol>
<li>How many unique objects were requested for en only?</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ip-172-31-53-207# gzcat pagecounts-20160327-000000.gz | awk &apos;BEGIN&#123;count=0&#125; &#123;if ($1 == &quot;en&quot; &amp;&amp; data[$2]++ == 0)&#123;count++&#125;&#125; END&#123;print &quot;There are&quot;, count,&quot; unique objects for en.&quot;&#125;&apos;</div><div class="line">There are 2167954  unique objects for en.</div></pre></td></tr></table></figure>
<p>After finish Question3, I used ‘[ ]’ as the delimiter.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ip-172-31-53-207# gzcat pagecounts-20160327-000000.gz | awk -F &apos;[ ]&apos; &apos;BEGIN&#123;count=0&#125; &#123;if ($1 == &quot;en&quot; &amp;&amp; data[$2]++ == 0)&#123;count++&#125;&#125; END&#123;print &quot;There are&quot;, count,&quot; unique objects for en.&quot;&#125;&apos;</div><div class="line">There are 2167954  unique objects for en.</div></pre></td></tr></table></figure></p>
<p>I also found a more clear solution:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ip-172-31-53-207# gzcat pagecounts-20160327-000000.gz | grep &quot;^en[ ]&quot; | wc -l</div><div class="line"> 2167954</div></pre></td></tr></table></figure>
<ol>
<li>Which is the most often requested object for de?</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ip-172-31-53-207# gzcat pagecounts-20160327-000000.gz | awk &apos;BEGIN&#123;maxCount=0; ob=&quot;&quot;&#125; &#123;if ($1 == &quot;de&quot; &amp;&amp; $3&gt;maxCount)&#123;maxCount = $3; ob = $2&#125;&#125; END&#123;print &quot;The most often requested object for de is&quot;, ob, &quot; maxcount is &quot;, maxCount&#125;&apos;</div><div class="line">The most often requested object for de is 575  maxcount is  3489854</div></pre></td></tr></table></figure>
<p>I feel that this result is unnormal. So I check this record.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ip-172-31-53-207# gzcat pagecounts-20160327-000000.gz | awk &apos;&#123;if ($1==&quot;de&quot; &amp;&amp; ($2 ==&quot;575&quot;)) print $0&#125;&apos;</div><div class="line">de  575 3489854</div></pre></td></tr></table></figure>
<p>Seems like this recode lacked parameter ‘page_title’ (or the ‘page_title’ is null), so the <code>awk</code> recognized parameter ‘count_views’ as ‘page_title’ and ‘total_response_size’ as ‘count_views’. And this is not an accidental phenomena.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">ip-172-31-53-207# gzcat pagecounts-20160327-000000.gz | awk &apos;&#123;if ($4 == &quot;&quot;) print $0&#125;&apos;</div><div class="line">ar  1053 51660428</div><div class="line">ar.m  4 40304</div><div class="line">ar.s  5 163840</div><div class="line">arz  10 559343</div><div class="line">as  2 69937</div><div class="line">ast  1 18563</div><div class="line">av.v  1 905</div><div class="line">...</div></pre></td></tr></table></figure>
<p>I want to specificly set the delimiter is one whitespace. I tried “-F ‘ ‘“, but failed. Then I realized the delimiter is a regular expression. I knew how to do:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ip-172-31-53-207# gzcat pagecounts-20160327-000000.gz | awk -F &apos;[ ]&apos; &apos;BEGIN&#123;maxCount=0; ob=&quot;&quot;&#125; &#123;if ($1 == &quot;de&quot; &amp;&amp; $3&gt;maxCount)&#123;maxCount = $3; ob = $2&#125;&#125; END&#123;print &quot;The most often requested object for de is&quot;, ob, &quot; maxcount is &quot;, maxCount&#125;&apos;</div><div class="line">The most often requested object for de is Wikipedia:Hauptseite  maxcount is  15235</div></pre></td></tr></table></figure>
<p>The most often requested object for de is Wikipedia:Hauptseite.</p>
<p>I also found a more clear solution (we knew that the object in each row is unique):</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ip-172-31-53-207# gzcat pagecounts-20160327-000000.gz | grep &quot;^de[ ]&quot; | sort -t&apos; &apos; -k3,3nr | head -1 | cut -f1,2 -d&apos; &apos;</div><div class="line">de Wikipedia:Hauptseite</div></pre></td></tr></table></figure>
<ol>
<li>How many requests per second were handled during this hour?</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ip-172-31-53-207# gzcat pagecounts-20160327-000000.gz | awk -F &apos;[ ]&apos; &apos;&#123;count+=$3&#125; END&#123;print count/3600&#125;&apos;</div><div class="line">9999.72</div></pre></td></tr></table></figure>
<p>9999.72 requests per second.</p>
<ol>
<li>How much data was transferred in total?</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ip-172-31-53-207# gzcat pagecounts-20160327-000000.gz | awk -F &apos;[ ]&apos; &apos;&#123;count+=$4&#125; END&#123;print count&#125;&apos;</div><div class="line">800635232210</div></pre></td></tr></table></figure>
<p>800635232210  data was transferred in total.</p>
<p>I look at the detail of this log in <a href="https://wikitech.wikimedia.org/wiki/Analytics/Data/Pagecounts-all-sites" target="_blank" rel="external">https://wikitech.wikimedia.org/wiki/Analytics/Data/Pagecounts-all-sites</a>.<br>The unit of size is ‘byte’. So there are 800635232210 bytes.</p>
<ol>
<li>Which was the largest object requested for fr?<br>I thought that the size of object equals ‘total_response_size’/‘count_views’.</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ip-172-31-53-207# gzcat pagecounts-20160327-000000.gz | awk -F &apos;[ ]&apos; &apos;BEGIN&#123;max=0; ob=&quot;&quot;&#125; &#123;if ($1 == &quot;fr&quot; &amp;&amp; ($4/$3)&gt;max)&#123;max = ($4/$3); ob = $2&#125;&#125; END&#123;print &quot;The largest object requested for fr is&quot;, ob, &quot; the size is &quot;, max&#125;&apos;</div><div class="line">The largest object requested for fr is Projet:Palette/Maintenance/Listes  the size is  1679324</div></pre></td></tr></table></figure>
<p>A more clear version:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ip-172-31-53-207# gzcat pagecounts-20160327-000000.gz | grep &quot;^fr[ ]&quot; | awk -F &apos;[ ]&apos; &apos;&#123;print $0,$4/$3&#125;&apos; | sort -t&apos; &apos; -k5,5nr | head -1 | cut -f1,2 -d&apos; &apos;</div><div class="line">fr Projet:Palette/Maintenance/Listes</div></pre></td></tr></table></figure></p>
<p>The largest object requested for fr is Projet:Palette/Maintenance/Listes</p>
<ol>
<li>What is the longest word found on the ten most frequently retrieved English Wikipedia pages?</li>
</ol>
<p>To solve this proplem, first we should get the ten most frequently retrieved ‘page_title’. English pages means domain is ‘en’ or ‘en.*’<br>At first time, I found some pages can’t crawl anything. Then I found:<br>In <a href="https://wikitech.wikimedia.org/wiki/Analytics/Data/Pagecounts-raw#Aggregation_for_.mw" target="_blank" rel="external">https://wikitech.wikimedia.org/wiki/Analytics/Data/Pagecounts-raw#Aggregation_for_.mw</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Aggregation for .mw</div><div class="line">Note: anomaly retained for backward compatibility! These lines better belong in project-level files. Best to ignore .mw lines.</div><div class="line">...</div><div class="line">So while the .mw abbreviation counts the mobile site, it throws wikipedia, wiktionary into the same bucket. And also, it does not distinguish between page_titles.</div></pre></td></tr></table></figure>
<p>So I did <code>grep</code> to gain the ‘en’ domain except ‘en.mw’ domain wikipedia pages, then sort by ‘counts_view’ and cat the first 10 line.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">ip-172-31-53-207# gzcat pagecounts-20160327-000000.gz | grep &quot;^en&quot; | grep -v &quot;^en.mw&quot; | sort -t&apos; &apos; -k3,3nr | head -10 | cut -f1,2 -d&apos; &apos;</div><div class="line">en.m Main_Page</div><div class="line">en Main_Page</div><div class="line">en Special:BlankPage</div><div class="line">en.m Billy_Joe_Saunders</div><div class="line">en.m Batman_v_Superman:_Dawn_of_Justice</div><div class="line">en Sine</div><div class="line">en Special:Search</div><div class="line">en Simon_Pegg</div><div class="line">en.m Chris_Eubank,_Jr.</div><div class="line">en.m Buddy_Hield</div></pre></td></tr></table></figure>
<p>Then I need to generate the url of each pages, use <code>awk</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">ip-172-31-53-207# gzcat pagecounts-20160327-000000.gz | grep &quot;^en&quot; | grep -v &quot;^en.mw&quot; | sort -t&apos; &apos; -k3,3nr | head -10 | cut -f1,2 -d&apos; &apos; | awk &apos;&#123;printf (&quot;https://%s.wikipedia.org/wiki/%s\n&quot;,$1,$2)&#125;&apos;</div><div class="line">https://en.m.wikipedia.org/wiki/Main_Page</div><div class="line">https://en.wikipedia.org/wiki/Main_Page</div><div class="line">https://en.wikipedia.org/wiki/Special:BlankPage</div><div class="line">https://en.m.wikipedia.org/wiki/Billy_Joe_Saunders</div><div class="line">https://en.m.wikipedia.org/wiki/Batman_v_Superman:_Dawn_of_Justice</div><div class="line">https://en.wikipedia.org/wiki/Sine</div><div class="line">https://en.wikipedia.org/wiki/Special:Search</div><div class="line">https://en.wikipedia.org/wiki/Simon_Pegg</div><div class="line">https://en.m.wikipedia.org/wiki/Chris_Eubank,_Jr.</div><div class="line">https://en.m.wikipedia.org/wiki/Buddy_Hield</div></pre></td></tr></table></figure>
<p>I choose curl to crawl web data. Before that, I need to install curl. Found resource in <a href="https://curl.haxx.se/download.html" target="_blank" rel="external">https://curl.haxx.se/download.html</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">ip-172-31-53-207# ftp https://curl.haxx.se/download/curl-7.53.1.tar.gz</div><div class="line">Trying 2a00:1a28:1200:9::2:443 ...</div><div class="line">ftp: Can&apos;t connect to `2a00:1a28:1200:9::2:443&apos;: No route to host</div><div class="line">Trying 80.67.6.50:443 ...</div><div class="line">Requesting https://curl.haxx.se/download/curl-7.53.1.tar.gz</div><div class="line">100% |***********************************|  3433 KiB  305.60 KiB/s    00:00 ETA</div><div class="line">3516153 bytes retrieved in 00:11 (305.60 KiB/s)</div><div class="line">ip-172-31-53-207# tar -zxf curl-7.53.1.tar.gz </div><div class="line">ip-172-31-53-207# cd curl-7.53.1</div><div class="line">ip-172-31-53-207# make</div><div class="line">...</div><div class="line">make install</div></pre></td></tr></table></figure></p>
<p>Crawl one pages for test.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">ip-172-31-53-207# curl  https://en.wikipedia.org/wiki/Simon_Pegg</div><div class="line">curl: (60) SSL certificate problem: unable to get local issuer certificate</div><div class="line">More details here: https://curl.haxx.se/docs/sslcerts.html</div><div class="line">curl performs SSL certificate verification by default, using a &quot;bundle&quot;</div><div class="line"> of Certificate Authority (CA) public keys (CA certs). If the default</div><div class="line"> bundle file isn&apos;t adequate, you can specify an alternate file</div><div class="line"> using the --cacert option.</div><div class="line">If this HTTPS server uses a certificate signed by a CA represented in</div><div class="line"> the bundle, the certificate verification probably failed due to a</div><div class="line"> problem with the certificate (it might be expired, or the name might</div><div class="line"> not match the domain name in the URL).</div><div class="line">If you&apos;d like to turn off curl&apos;s verification of the certificate, use</div><div class="line"> the -k (or --insecure) option.</div></pre></td></tr></table></figure>
<p>The log say I need to do the SSL certificatation, I choose use -k to skip this step. And I want to ignore the log information in later process.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">ip-172-31-53-207# curl -k -s https://en.wikipedia.org/wiki/Simon_Pegg | head -6</div><div class="line">&lt;!DOCTYPE html&gt;</div><div class="line">&lt;html class=&quot;client-nojs&quot; lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta charset=&quot;UTF-8&quot;/&gt;</div><div class="line">&lt;title&gt;Simon Pegg - Wikipedia&lt;/title&gt;</div><div class="line">&lt;script&gt;document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, &quot;$1client-js$2&quot; );&lt;/script&gt;</div><div class="line">ip-172-31-24-123#</div></pre></td></tr></table></figure>
<p>Then I need to clean up these useless character. I will use ‘tr’ to replace some symbol and character with space, only leave alpha.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ip-172-31-53-207# curl -k -s https://en.wikipedia.org/wiki/Simon_Pegg | head -6 | tr -c  &quot;[:alpha:]&quot; &quot; &quot;</div><div class="line">  DOCTYPE html   html class  client nojs  lang  en  dir  ltr    head   meta charset  UTF 8     title Simon Pegg   Wikipedia  title   script document documentElement className   document documentElement className replace       s client nojs  s        1client js 2      script</div></pre></td></tr></table></figure>
<p>Use ‘awk’ to calculate the answear. </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">...| awk &apos;BIGIN &#123;maxWord=0; maxLeng=0;&#125; &#123;for(i=1;i&lt;=NF;i++) if(length($i)&gt;maxLeng)&#123;maxWord=$i; maxLeng=length($i);&#125;&#125; END &#123;print maxWord,maxLeng&#125;&apos;</div></pre></td></tr></table></figure>
<p>In the end, I also need to use ‘xargs’ to transfer the ‘url’ to ‘curl’ one by one, combine all of these:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ip-172-31-53-207# gzcat pagecounts-20160327-000000.gz | grep &quot;^en&quot; | grep -v &quot;^en.mw&quot; | sort -t&apos; &apos; -k3,3nr | head -10 | cut -f1,2 -d&apos; &apos; | awk &apos;&#123;printf (&quot;https://%s.wikipedia.org/wiki/%s\n&quot;,$1,$2)&#125;&apos; | xargs curl -k -s | tr -c  &quot;[:alpha:]&quot; &quot; &quot; | awk &apos;BEGIN &#123;maxWord=0; maxLeng=0;&#125; &#123;for(i=1;i&lt;=NF;i++) if(length($i)&gt;maxLeng)&#123;maxWord=$i; maxLeng=length($i);&#125;&#125; END &#123;print maxWord,maxLeng&#125;&apos;</div><div class="line">wgRelatedArticlesOnlyUseCirrusSearch 36</div></pre></td></tr></table></figure>
<p>So the longest word found on the ten most frequently retrieved English Wikipedia pages is wgRelatedArticlesOnlyUseCirrusSearch.</p>
<p>rm $tmp<br>rm listInstanceId.txt<br>exit 0</p>
<p>```</p>

      
    </div>
    
  </div>
  
    
    <div class="copyright">
        <p><span>Title:</span><a href="/2017/08/17/Text-processing-in-Linux/">Text-Processing</a></p>
        <p><span>Author:</span><a href="/" title="Back to Homepage">Ankai Liang</a></p>
        <p><span>Created:</span>2017-08-17, 00:32:41</p>
        <p><span>Updated:</span>2017-08-17, 03:32:02</p>
        <p>
            <span>Full URL:</span><a class="post-url" href="/2017/08/17/Text-processing-in-Linux/" title="Text-Processing">https://AnkaiLiang.github.io/2017/08/17/Text-processing-in-Linux/</a>
            <span class="copy-path" data-clipboard-text="From https://AnkaiLiang.github.io/2017/08/17/Text-processing-in-Linux/　　By Ankai Liang" title="Copy Article&#39;s Link &amp; Author"><i class="fa fa-clipboard"></i></span>
            <script> var clipboard = new Clipboard('.copy-path'); </script>
        </p>
        <p>
            <span>License:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC BY-NC-SA 4.0 International" target = "_blank">"CC BY-NC-SA 4.0"</a> Keep Link &amp; Author if Distribute.
        </p>
    </div>



    <nav id="article-nav">
        
            <div id="article-nav-newer" class="article-nav-title">
                <a href="/2017/08/17/RushHour/">
                    RushHour
                </a>
            </div>
        
        
            <div id="article-nav-older" class="article-nav-title">
                <a href="/2017/08/17/afewmore-A-tool-of-ec2-how-to-write-a-shell-tool/">
                    Afewmore
                </a>
            </div>
        
    </nav>

  
</article>

    <div id="toc" class="toc-article">
    <strong class="toc-title">Contents</strong>
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Description"><span class="toc-number">1.</span> <span class="toc-text">Description</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Content"><span class="toc-number">2.</span> <span class="toc-text">Content</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#HW5-CS615"><span class="toc-number">3.</span> <span class="toc-text">HW5_CS615</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Create-instance-of-ami-569ed93c-and-log-in"><span class="toc-number">3.1.</span> <span class="toc-text">Create instance of ami-569ed93c and log in</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Answear-Question"><span class="toc-number">3.2.</span> <span class="toc-text">Answear Question</span></a></li></ol></li></ol>
</div>
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
</style>

<input type="button" id="tocButton" value="Hide"  title="Show or Hide Table of Contents">

<script>
    yiliaConfig.toc = ["Hide", "Show", !!"false"];
</script>



    
<div class="share">
    
        <div class="bdsharebuttonbox">
            <a href="#" class="fa fa-twitter bds_twi" data-cmd="twi" title="分享到推特"></a>
            <a href="#" class="fa fa-weibo bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
            <a href="#" class="fa fa-qq bds_sqq" data-cmd="sqq" title="分享给 QQ 好友"></a>
            <a href="#" class="fa fa-files-o bds_copy" data-cmd="copy" title="复制网址"></a>
            <a href="#" class="fa fa fa-envelope-o bds_mail" data-cmd="mail" title="通过邮件分享"></a>
            <a href="#" class="fa fa-weixin bds_weixin" data-cmd="weixin" title="生成文章二维码"></a>
            <a href="#" class="fa fa-share-alt bds_more" data-cmd="more"></i></a>
        </div>
        <script>
            window._bd_share_config={
                "common":{"bdSnsKey":{},"bdText":"Text-Processing　| Ankai Liang's Blog　","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
        </script>
    

    
</div>







    
      <div class="duoshuo" id="comments">
    <div id="comment-box" ></div>
    <div class="ds-thread" id="ds-thread" data-thread-key="2017/08/17/Text-processing-in-Linux/" data-title="Text-Processing" data-url="https://AnkaiLiang.github.io/2017/08/17/Text-processing-in-Linux/"></div>
    <script>
        var duoshuoQuery = {short_name:"ankailiang"};
        var loadComment = function(){
            var d = document, s = d.createElement('script');
            s.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
            s.async = true; s.charset = 'UTF-8';
            (d.head || d.body).appendChild(s);
        }

        
    </script>
    
    <script> loadComment(); </script>

</div>
    




    <div class="scroll" id="post-nav-button">
        
            <a href="/2017/08/17/RushHour/" title="Pre: RushHour">
                <i class="fa fa-angle-left"></i>
            </a>
        

        <a title="Mini Archives"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>

        
            <a href="/2017/08/17/afewmore-A-tool-of-ec2-how-to-write-a-shell-tool/" title="Next: Afewmore">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>

    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/08/17/Page-Rank-Hadoop/">Page Rank - Hadoop</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/17/RushHour/">RushHour</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/17/Text-processing-in-Linux/">Text-Processing</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/17/afewmore-A-tool-of-ec2-how-to-write-a-shell-tool/">Afewmore</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/16/tcpdump-1-DNS/">Tcpdump(1) DNS</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/16/Using-Manages-packages-in-Linux/">Using Manages Packages in Linux</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/16/Using-the-AWS-CLI-to-set-instance/">Using the AWS-CLI to Set Instance</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/19/Install and Configure AWS Tools/">Install and Configure AWS Tools</a></li></ul>




    <script>
        
    </script>
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2016-2017 Ankai Liang
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="A fast, simple &amp; powerful blog framework">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="Another simple and elegant theme for Hexo  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" >Site Visitors: 
                            <span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>, </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit">Page Hits: 
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 5;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>





<div class="scroll" id="scroll">
    <a href="#" title="Back to Top"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="Comments"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="Go to Bottom"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
            
            
            
            
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>
<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>